# ğŸµ éŸ³é¢‘èŠ‚å¥å¡ç‚¹æå–å·¥å…·

è¿™æ˜¯ä¸€å¥—ä¸“ä¸ºè§†é¢‘æ··å‰ªè®¾è®¡çš„PythonéŸ³é¢‘åˆ†æå·¥å…·ï¼Œèƒ½å¤Ÿè‡ªåŠ¨æ£€æµ‹éŸ³é¢‘ä¸­çš„èŠ‚æ‹ç‚¹ã€åˆ†æéŸ³ä¹ç»“æ„ï¼Œå¹¶æä¾›æ™ºèƒ½å‰ªè¾‘å»ºè®®ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ åŸºç¡€åŠŸèƒ½
- **èŠ‚æ‹æ£€æµ‹**: è‡ªåŠ¨è¯†åˆ«éŸ³é¢‘çš„BPMå’ŒèŠ‚æ‹ç‚¹
- **èµ·å§‹ç‚¹æ£€æµ‹**: ç²¾ç¡®å®šä½éŸ³é¢‘ä¸­çš„é‡è¦æ—¶åˆ»
- **èŠ‚å¥åˆ†æ**: åˆ†æèŠ‚æ‹ç¨³å®šæ€§å’ŒèŠ‚å¥æ¨¡å¼
- **å¯è§†åŒ–**: ç”Ÿæˆç›´è§‚çš„åˆ†æå›¾è¡¨

### ğŸš€ é«˜çº§åŠŸèƒ½
- **éŸ³ä¹ç»“æ„åˆ†æ**: è‡ªåŠ¨è¯†åˆ«introã€verseã€chorusã€bridgeã€outroæ®µè½
- **é«˜å…‰æ—¶åˆ»æ£€æµ‹**: æ‰¾åˆ°æœ€é€‚åˆåšå¡ç‚¹çš„ä½ç½®
- **æ™ºèƒ½å‰ªè¾‘å»ºè®®**: æä¾›åŠ¨æ€ã€å¹³æ»‘ã€èŠ‚å¥ä¸‰ç§å‰ªè¾‘é£æ ¼
- **èƒ½é‡åˆ†æ**: åˆ†æéŸ³é¢‘çš„èƒ½é‡åˆ†å¸ƒå’Œå˜åŒ–
- **å®Œæ•´æŠ¥å‘Š**: å¯¼å‡ºJSONæ ¼å¼çš„è¯¦ç»†åˆ†ææŠ¥å‘Š

## ğŸ“¦ å®‰è£…ä¾èµ–

### è‡ªåŠ¨å®‰è£…ï¼ˆæ¨èï¼‰
```bash
python setup_audio_tools.py
```

### æ‰‹åŠ¨å®‰è£…
```bash
pip install -r requirements.txt
```

### ç³»ç»Ÿä¾èµ–
- **Linux**: `sudo apt-get install libsndfile1 libsndfile1-dev ffmpeg`
- **macOS**: `brew install ffmpeg`
- **Windows**: ä¸‹è½½å®‰è£… [FFmpeg](https://ffmpeg.org/download.html)

## ğŸ® ä½¿ç”¨æ–¹æ³•

### 1. åŸºç¡€èŠ‚æ‹æ£€æµ‹

```bash
# åŸºæœ¬ä½¿ç”¨
python audio_beat_detection.py your_music.mp3

# ç”Ÿæˆå¯è§†åŒ–å›¾è¡¨
python audio_beat_detection.py your_music.mp3 -v

# æŒ‡å®šè¾“å‡ºæ ¼å¼
python audio_beat_detection.py your_music.mp3 -f csv -o my_beats

# è°ƒæ•´æ£€æµ‹å‚æ•°
python audio_beat_detection.py your_music.mp3 -t 0.5 -s 44100
```

### 2. é«˜çº§éŸ³é¢‘åˆ†æ

```bash
# å®Œæ•´åˆ†æ
python advanced_audio_analyzer.py your_music.mp3
```

### 3. Pythonä»£ç ä¸­ä½¿ç”¨

```python
from audio_beat_detection import AudioBeatDetector
from advanced_audio_analyzer import AdvancedAudioAnalyzer

# åŸºç¡€èŠ‚æ‹æ£€æµ‹
detector = AudioBeatDetector()
detector.load_audio("music.mp3")
tempo, beat_times = detector.detect_tempo_and_beats()
detector.export_beat_points("beats.json")

# é«˜çº§åˆ†æ
analyzer = AdvancedAudioAnalyzer()
analyzer.load_audio("music.mp3")
analyzer.detect_tempo_and_beats()
analyzer.detect_music_structure()

# è·å–é«˜å…‰æ—¶åˆ»
highlights = analyzer.find_highlight_moments(top_n=5)

# ç”Ÿæˆå‰ªè¾‘å»ºè®®
cuts = analyzer.generate_cut_points(target_duration=60.0, style='dynamic')

# å¯¼å‡ºå®Œæ•´æŠ¥å‘Š
analyzer.export_analysis_report("analysis_report.json")
```

## ğŸ“Š è¾“å‡ºæ ¼å¼

### JSONæ ¼å¼ç¤ºä¾‹
```json
{
  "metadata": {
    "tempo_bpm": 128.5,
    "total_beats": 245,
    "audio_duration": 180.5,
    "analysis_timestamp": "2024-01-15T10:30:00"
  },
  "beat_points": [0.468, 0.936, 1.404, ...],
  "music_structure": [
    {
      "start_time": 0.0,
      "end_time": 8.0,
      "segment_type": "intro",
      "energy_level": 0.15
    }
  ],
  "highlight_moments": [
    {
      "time": 32.5,
      "intensity": 0.85,
      "description": "èƒ½é‡çˆ†å‘ (chorus)"
    }
  ]
}
```

### CSVæ ¼å¼ç¤ºä¾‹
```csv
åºå·,æ—¶é—´(ç§’),æ—¶é—´(åˆ†:ç§’)
1,0.468,0:00.468
2,0.936,0:00.936
3,1.404,0:01.404
```

## ğŸ¨ å¯è§†åŒ–å›¾è¡¨

å·¥å…·ä¼šç”ŸæˆåŒ…å«ä»¥ä¸‹å†…å®¹çš„å¯è§†åŒ–å›¾è¡¨ï¼š

1. **éŸ³é¢‘æ³¢å½¢ä¸èŠ‚æ‹ç‚¹**: æ˜¾ç¤ºåŸå§‹éŸ³é¢‘å’Œæ£€æµ‹åˆ°çš„èŠ‚æ‹ä½ç½®
2. **èµ·å§‹å¼ºåº¦åˆ†æ**: æ˜¾ç¤ºéŸ³é¢‘çš„èµ·å§‹å¼ºåº¦å˜åŒ–
3. **èŠ‚æ‹é—´éš”åˆ†æ**: åˆ†æèŠ‚æ‹çš„ç¨³å®šæ€§
4. **éŸ³ä¹ç»“æ„æ ‡è®°**: æ ‡è¯†ä¸åŒçš„éŸ³ä¹æ®µè½
5. **èƒ½é‡åˆ†å¸ƒ**: æ˜¾ç¤ºéŸ³é¢‘çš„èƒ½é‡å˜åŒ–
6. **é«˜å…‰æ—¶åˆ»**: æ ‡è®°æœ€ä½³å¡ç‚¹ä½ç½®

## ğŸ¯ åº”ç”¨åœºæ™¯

### è§†é¢‘æ··å‰ª
- è‡ªåŠ¨è¯†åˆ«éŸ³ä¹çš„èŠ‚æ‹ç‚¹è¿›è¡Œç²¾å‡†å¡ç‚¹
- æ ¹æ®éŸ³ä¹ç»“æ„å®‰æ’è§†é¢‘ç‰‡æ®µ
- åœ¨é«˜èƒ½é‡æ—¶åˆ»æ”¾ç½®é‡è¦ç”»é¢

### éŸ³ä¹åˆ†æ
- åˆ†ææ­Œæ›²çš„ç»“æ„å’ŒèŠ‚å¥ç‰¹å¾
- æ¯”è¾ƒä¸åŒæ­Œæ›²çš„èŠ‚å¥æ¨¡å¼
- ä¸ºDJæ··éŸ³æä¾›èŠ‚æ‹ä¿¡æ¯

### è‡ªåŠ¨å‰ªè¾‘
- æ ¹æ®éŸ³ä¹èŠ‚å¥è‡ªåŠ¨ç”Ÿæˆå‰ªè¾‘ç‚¹
- æ™ºèƒ½é€‰æ‹©æœ€ä½³çš„éŸ³é¢‘ç‰‡æ®µ
- ç”Ÿæˆä¸åŒé£æ ¼çš„å‰ªè¾‘å»ºè®®

## âš™ï¸ å‚æ•°è¯´æ˜

### åŸºç¡€æ£€æµ‹å‚æ•°
- `sample_rate`: éŸ³é¢‘é‡‡æ ·ç‡ (é»˜è®¤: 22050)
- `threshold`: èµ·å§‹æ£€æµ‹é˜ˆå€¼ (é»˜è®¤: 0.3)
- `hop_length`: åˆ†æçª—å£è·³è·ƒé•¿åº¦ (é»˜è®¤: 512)

### é«˜çº§åˆ†æå‚æ•°
- `target_duration`: ç›®æ ‡å‰ªè¾‘æ—¶é•¿ (é»˜è®¤: 60ç§’)
- `style`: å‰ªè¾‘é£æ ¼ ('dynamic', 'smooth', 'rhythmic')
- `top_n`: è¿”å›çš„é«˜å…‰æ—¶åˆ»æ•°é‡ (é»˜è®¤: 5)

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ImportError: No module named 'librosa'**
   ```bash
   pip install librosa
   ```

2. **éŸ³é¢‘æ–‡ä»¶æ— æ³•åŠ è½½**
   - ç¡®ä¿å®‰è£…äº†FFmpeg
   - æ£€æŸ¥éŸ³é¢‘æ–‡ä»¶æ ¼å¼æ˜¯å¦æ”¯æŒ
   - å°è¯•è½¬æ¢ä¸ºWAVæˆ–MP3æ ¼å¼

3. **åˆ†æç»“æœä¸å‡†ç¡®**
   - è°ƒæ•´thresholdå‚æ•°
   - å°è¯•ä¸åŒçš„sample_rate
   - ç¡®ä¿éŸ³é¢‘è´¨é‡è‰¯å¥½

### æ€§èƒ½ä¼˜åŒ–

- å¯¹äºé•¿éŸ³é¢‘æ–‡ä»¶ï¼Œè€ƒè™‘é™ä½é‡‡æ ·ç‡
- ä½¿ç”¨è¾ƒå¤§çš„hop_lengthå¯ä»¥æé«˜å¤„ç†é€Ÿåº¦
- å¯¹äºå®æ—¶åº”ç”¨ï¼Œå¯ä»¥åˆ†æ®µå¤„ç†éŸ³é¢‘

## ğŸ“ ç¤ºä¾‹æ–‡ä»¶

è¿è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆç¤ºä¾‹ï¼š

```bash
python example_usage.py
```

è¿™å°†åˆ›å»ºä¸€ä¸ªæµ‹è¯•éŸ³é¢‘æ–‡ä»¶å¹¶æ¼”ç¤ºæ‰€æœ‰åŠŸèƒ½ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªå·¥å…·ï¼

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§LICENSEæ–‡ä»¶

---

ğŸµ **è®©éŸ³é¢‘åˆ†æå˜å¾—ç®€å•ï¼Œè®©è§†é¢‘å‰ªè¾‘æ›´åŠ æ™ºèƒ½ï¼**
