# 🎬 智能镜头检测与分段系统 - GUI用户手册

## 📋 概述

智能镜头检测与分段系统GUI提供了一个用户友好的图形界面，让您可以轻松地对视频进行智能镜头检测和自动分段处理。

## 🚀 启动GUI

### 方法1：使用启动脚本
```bash
cd shot_detection
source venv/bin/activate
python run_gui.py
```

### 方法2：直接启动
```bash
cd shot_detection
source venv/bin/activate
python gui_app.py
```

## 🎯 主要功能

### 1. 📁 文件选择
- **视频文件选择**：支持多种视频格式（MP4、AVI、MOV、MKV等）
- **输出目录设置**：自动建议输出目录，也可手动选择
- **文件验证**：自动验证视频文件的有效性

### 2. ⚙️ 处理设置
- **分段组织方式**：
  - `duration`：按时长分类（短≤5s，中5-30s，长>30s）
  - `quality`：按检测质量分类（高/中/低置信度）
  - `none`：所有分段放在同一目录
- **输出质量**：
  - `low`：快速处理，文件较小
  - `medium`：平衡质量和大小（推荐）
  - `high`：高质量，文件较大
  - `lossless`：无损质量，文件最大

### 3. 📹 视频信息显示
- 文件名和路径
- 视频时长
- 分辨率（宽×高）
- 帧率（FPS）
- 文件大小

### 4. 📊 实时进度监控
- **进度条**：显示处理进度百分比
- **状态显示**：当前处理阶段
- **实时日志**：详细的处理日志信息
- **处理步骤**：
  1. 验证输入文件
  2. 初始化检测器
  3. 执行镜头检测
  4. 生成分段信息
  5. 切分视频文件
  6. 生成项目文件
  7. 生成分析报告

### 5. 📋 结果查看
- **处理统计**：分段数量、文件大小、处理时间
- **分析报告**：一键在浏览器中打开HTML报告
- **视频分段**：直接打开包含分段视频的目录
- **项目文件**：查看生成的项目文件（XML、EDL、JSON等）

## 🎨 界面布局

```
┌─────────────────────────────────────────────────────────┐
│                🎬 智能镜头检测与分段系统                    │
├─────────────────────────────────────────────────────────┤
│ 📁 文件选择                                              │
│   视频文件: [________________] [浏览]                     │
│   输出目录: [________________] [浏览]                     │
├─────────────────────────────────────────────────────────┤
│ ⚙️ 处理设置                                              │
│   分段组织: [duration ▼]  输出质量: [medium ▼]           │
├─────────────────────────────────────────────────────────┤
│ 📹 视频信息                                              │
│   文件名: example.mp4                                   │
│   时长: 02:30.500  分辨率: 1920x1080  帧率: 30.0 FPS    │
├─────────────────────────────────────────────────────────┤
│ [🚀 开始处理] [⏹️ 停止] [🗑️ 清除日志] [📁 打开输出目录]    │
├─────────────────────────────────────────────────────────┤
│ 📊 处理进度                                              │
│   ████████████████████████████████████████ 100%         │
│   状态: 处理完成                                         │
│   ┌─────────────────────────────────────────────────┐   │
│   │ [14:30:15] INFO: 开始处理...                    │   │
│   │ [14:30:16] INFO: 检测到 25 个镜头边界            │   │
│   │ [14:30:45] SUCCESS: 处理完成！                  │   │
│   └─────────────────────────────────────────────────┘   │
├─────────────────────────────────────────────────────────┤
│ 📋 处理结果                                              │
│   • 视频分段: 22 个                                     │
│   • 分析报告: 1 个                                      │
│   • 总文件大小: 5.6 MB                                  │
│   [📊 查看分析报告] [🎬 查看视频分段] [📤 查看项目文件]    │
└─────────────────────────────────────────────────────────┘
```

## 📖 使用步骤

### 步骤1：选择视频文件
1. 点击"浏览"按钮选择要处理的视频文件
2. 系统会自动验证文件格式并显示视频信息
3. 输出目录会自动设置，也可手动修改

### 步骤2：配置处理参数
1. 选择分段组织方式（推荐使用`duration`）
2. 选择输出质量（推荐使用`medium`）

### 步骤3：开始处理
1. 点击"🚀 开始处理"按钮
2. 观察进度条和日志信息
3. 处理过程中可以点击"⏹️ 停止"中断

### 步骤4：查看结果
1. 处理完成后，查看结果统计
2. 点击"📊 查看分析报告"在浏览器中打开详细报告
3. 点击"🎬 查看视频分段"打开包含分段视频的目录
4. 点击"📤 查看项目文件"查看生成的项目文件

## 🎯 生成的文件

### 视频分段
- 按设置的组织方式分类存放
- 文件名格式：`原文件名_segment_XXX.mp4`
- 保持原视频的质量和格式

### 分析报告
- `analysis_report.html`：包含完整的分析结果
- 镜头检测统计
- 时间轴可视化
- 分段信息表格

### 项目文件
- `detection_results.json`：详细的检测数据
- `quality_metrics.json`：质量指标
- `segments_info.csv`：分段信息表格
- `edit_decision_list.edl`：编辑决策列表
- `premiere_project.xml`：Premiere Pro项目文件

## ⚠️ 注意事项

### 系统要求
- Python 3.8+
- FFmpeg（用于视频处理）
- 足够的磁盘空间（建议至少是原视频文件大小的2倍）

### 性能提示
- 处理时间取决于视频长度和复杂度
- 高质量设置会增加处理时间和文件大小
- 建议在处理大文件时选择较低的质量设置进行测试

### 故障排除
1. **GUI无法启动**：检查Python和依赖项是否正确安装
2. **视频文件无法识别**：确保文件格式受支持且未损坏
3. **处理失败**：检查FFmpeg是否正确安装并添加到PATH
4. **内存不足**：尝试处理较短的视频或降低质量设置

## 🔧 高级功能

### 批量处理
虽然GUI目前不直接支持批量处理，但可以：
1. 逐个处理多个视频文件
2. 使用命令行版本进行批量处理

### 自定义设置
- 可以通过修改配置文件调整检测参数
- 支持自定义输出格式和质量设置

### 集成其他工具
- 生成的EDL文件可导入专业编辑软件
- XML项目文件兼容Premiere Pro
- JSON数据可用于进一步分析

## 📞 技术支持

如果遇到问题或需要帮助：
1. 查看日志信息了解具体错误
2. 确认系统要求和依赖项
3. 尝试使用较小的测试文件
4. 检查输出目录的写入权限

---

**享受智能视频处理的便捷体验！** 🎬✨
